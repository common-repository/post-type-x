/*!
 impleCode Admin scripts v1.0.0 - 2018-12
 Adds appropriate scripts to admin settings
 (c) 2019 impleCode - https://implecode.com
 */
(function(e,t,r,i,N,O){var R=r.createElement;var S=t.InspectorControls;var P=i.SelectControl;var T=i.TextControl;var x=i.Panel;var B=i.PanelBody;var H=i.PanelRow;var c=i.Heading;e.registerBlockType("ic-epc/show-products",{title:ic_epc_blocks.strings.show_products,icon:"grid-view",category:"ic-epc-block-cat",attributes:{category:{type:"array",default:[],items:{type:"integer"}},product:{type:"array",default:[],items:{type:"integer"}},products_limit:{type:"string",default:ic_epc_blocks.products_limit_def},orderby:{type:"string",default:""},order:{type:"string",default:""},archive_template:{type:"string",default:ic_epc_blocks.archive_template_def},per_row:{type:"string",default:ic_epc_blocks.per_row_def}},edit(t){var e={category:t.attributes.category,product:t.attributes.product,products_limit:t.attributes.products_limit,orderby:t.attributes.orderby,order:t.attributes.order,archive_template:t.attributes.archive_template,per_row:t.attributes.per_row};var r=t.attributes.category;var i=t.attributes.product;var c=t.attributes.products_limit;var s=t.attributes.orderby;var o=t.attributes.order;var l=t.attributes.archive_template;var a=t.attributes.per_row;var p=[];var n=O.useSelect(e=>e("core").getEntityRecords("taxonomy","al_product-cat",{per_page:-1}));if(n){p=[{value:0,label:ic_epc_blocks.strings.all}];n.forEach(e=>{p.push({value:e.id,label:e.name+" ("+e.count+")"})})}var _=[];var u=O.useSelect(e=>e("core").getEntityRecords("postType","al_product",{per_page:-1,_fields:"id,title"}));if(u){_=[{value:0,label:ic_epc_blocks.strings.all}];u.forEach(e=>{_.push({value:e.id,label:e.title.rendered})})}var b=ic_epc_blocks.orderby_options;var d=ic_epc_blocks.order_options;var g=ic_epc_blocks.template_options;function v(e){t.setAttributes({category:e})}function y(e){t.setAttributes({product:e})}function k(e){t.setAttributes({products_limit:e})}function m(e){t.setAttributes({orderby:e})}function w(e){t.setAttributes({order:e})}function h(e){t.setAttributes({archive_template:e})}function f(e){t.setAttributes({per_row:e})}var C="";if(p){C=R(P,{multiple:"multiple",label:ic_epc_blocks.strings.select_categories,value:r,options:p,onChange:v})}else{C=ic_epc_blocks.strings.loading}var A="";if(u){A=R(P,{multiple:"multiple",label:ic_epc_blocks.strings.select_products,value:i,options:_,onChange:y})}else{A=ic_epc_blocks.strings.loading}var E=[R(S,{key:"ic-epc-show-products-block-controls"},R(B,{title:ic_epc_blocks.strings.by_category,className:"ic-panel-body",initialOpen:r},C),R(B,{title:ic_epc_blocks.strings.by_product,className:"ic-panel-body",initialOpen:i},A),R(B,{title:ic_epc_blocks.strings.sort_limit,className:"ic-panel-body",initialOpen:true},R(T,{label:ic_epc_blocks.strings.select_limit,value:c,type:"number",onChange:k}),R(P,{label:ic_epc_blocks.strings.select_orderby,value:s,options:b,onChange:m}),R(P,{label:ic_epc_blocks.strings.select_order,value:o,options:d,onChange:w}),R(P,{label:ic_epc_blocks.strings.select_template,value:l,options:g,onChange:h}),R(T,{label:ic_epc_blocks.strings.select_perrow,value:a,type:"number",onChange:f})))];if(r.length!==0||i.length!==0){E.push(R(N,{key:"ic-epc-show-products-server-side-renderer",block:"ic-epc/show-products",attributes:e}))}else{E.push(R(x,{header:ic_epc_blocks.strings.choose_products,key:"ic-epc-show-products-block-panel"},R(B,{title:ic_epc_blocks.strings.by_category,className:"ic-panel-body",initialOpen:false},C),R(B,{title:ic_epc_blocks.strings.by_product,className:"ic-panel-body",initialOpen:false},R(H,{},A))))}return E},save(){return null}})})(window.wp.blocks,window.wp.blockEditor,window.wp.element,window.wp.components,window.wp.serverSideRender,window.wp.data);